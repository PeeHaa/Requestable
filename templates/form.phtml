<?php
$headers = '';
$prefix = '';

foreach ($requestData->getHeaders() as $headers) {
    foreach ($headers as $key => $value) {
        $headers .= $prefix . $key . ': ' . $value;

        $prefix = "\r\n";
    }
}

$customMethod = '';
if (!in_array($requestData->getMethod(), ['GET', 'HEAD', 'POST', 'PUT', 'DELETE', 'TRACE', 'OPTIONS', 'CONNECT', 'PATCH'], true)) {
    $customMethod = $requestData->getMethod();
}

?>

<form action="/" method="post">
    <div class="form-group">
        <label>URI</label>
        <input type="url" name="uri" placeholder="URI to which to make the request" value="<?php echo $requestData->getUri(); ?>">
    </div>
    <div class="form-group">
        <label>Method</label>
        <select name="method">
            <option value="GET" <?php if ($requestData->getMethod() === 'GET' ) echo 'selected="selected"'; ?>>GET</option>
            <option value="HEAD" <?php if ($requestData->getMethod() === 'HEAD' ) echo 'selected="selected"'; ?>>HEAD</option>
            <option value="POST" <?php if ($requestData->getMethod() === 'POST' ) echo 'selected="selected"'; ?>>POST</option>
            <option value="PUT" <?php if ($requestData->getMethod() === 'PUT' ) echo 'selected="selected"'; ?>>PUT</option>
            <option value="DELETE" <?php if ($requestData->getMethod() === 'DELETE' ) echo 'selected="selected"'; ?>>DELETE</option>
            <option value="TRACE" <?php if ($requestData->getMethod() === 'TRACE' ) echo 'selected="selected"'; ?>>TRACE</option>
            <option value="OPTIONS" <?php if ($requestData->getMethod() === 'OPTIONS' ) echo 'selected="selected"'; ?>>OPTIONS</option>
            <option value="CONNECT" <?php if ($requestData->getMethod() === 'CONNECT' ) echo 'selected="selected"'; ?>>CONNECT</option>
            <option value="PATCH" <?php if ($requestData->getMethod() === 'PATCH' ) echo 'selected="selected"'; ?>>PATCH</option>
        </select>
    </div>
    <div class="form-group">
        <label>Custom method</label>
        <input type="text" name="custommethod" placeholder="Don't fill when using one of the  default methods" value="<?php echo $customMethod; ?>">
    </div>
    <div class="form-group">
        <label>Follow redirects</label>
        <label class="block"><input type="checkbox" name="follow" <?php if ($requestData->redirectsEnabled()) echo 'checked="checked"'; ?> value="true"> Automatically follow redirects?</label>
    </div>
    <div class="form-group">
        <label>Enable cookies</label>
        <label class="block"><input type="checkbox" name="cookies" <?php if ($requestData->cookiesEnabled()) echo 'checked="checked"'; ?> value="true"> Enable cookie storage?</label>
    </div>
    <div class="form-group">
        <label>Request headers (1 per line)</label>
        <textarea name="headers" placeholder="Enter the headers of the request separated by a newline"><?php echo $headers; ?></textarea>
    </div>
    <div class="form-group">
        <label>Request body</label>
        <textarea name="body" placeholder="Enter the body of the request"><?php echo $requestData->getBody(); ?></textarea>
    </div>
    <input type="submit" name="submit" value="Make request">
</form>

<?php if (isset($result)) echo $result; ?>

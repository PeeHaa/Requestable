var Animator;(function(){var a={linear:function(m){return m},accel:function(m){return Math.pow(m,3)},decel:function(m){return 1-Math.pow(1-m,3)},sudden:function(m){return Math.pow(m,10)},arc:function(m){if(m<0.5){return Math.pow(m*2,3)/2}else{return 1-Math.pow(2-m*2,3)/2}}};function i(n,o){var m=null;if(document.defaultView&&document.defaultView.getComputedStyle){o=o.replace(/[A-Z]/g,function(p){return"-"+p.toLowerCase()});m=document.defaultView.getComputedStyle(n,null).getPropertyValue(o)}else{if(n.currentStyle){o=o.replace(/-([a-z])/g,function(q,p){return p.toUpperCase()});m=n.currentStyle[o]}}return m}function f(n,o){var m=n(o);if(m>1){m=1}else{if(m<0){m=0}}return m}function d(n,m){if(typeof m.units==="string"){n=String(n)+m.units}this.style[m.css]=n}function c(o,m,p){var n;for(n in p){if(p.hasOwnProperty(n)){p[n].frameFunc.call(o,p[n].startValue+((p[n].endValue-p[n].startValue)*f(p[n].easingFunc,m)),p[n])}}}function k(o){var m=this,n=1-((o.endTime-(new Date()).getTime())/o.totalTime);this.timeout=null;if(n<1){c(this.element,n,o.animations);this.timeout=setTimeout(function(){k.call(m,o)},o.frameInterval)}else{c(this.element,1,o.animations);if(typeof o.complete==="function"){o.complete.call(m)}}}function g(m){m.frameRate=m.frameRate!==undefined&&parseFloat(m.frameRate)?parseFloat(m.frameRate):30;m.frameInterval=(1/m.frameRate)*1000}function h(m){m.totalTime=m.totalTime!==undefined&&parseFloat(m.totalTime)?Math.floor(parseFloat(m.totalTime)):1000;m.endTime=(new Date()).getTime()+m.totalTime}function j(m){var n={};if(m.css!==undefined){n.css=m.css}if(m.startValue!==undefined){n.startValue=m.startValue}if(m.endValue!==undefined){n.endValue=m.endValue}if(m.frameFunc!==undefined){n.frameFunc=m.frameFunc}if(m.easing!==undefined){n.easing=m.easing}if(m.easingFunc!==undefined){n.easingFunc=m.easingFunc}m.animations=[n]}function l(m){if(m.endValue===undefined){throw new Error("No end value specified")}if(typeof m.endValue==="string"){m.endValue.replace(/^\s*(\d+(?:\.\d+)?)([a-z]+)?\s*$/i,function(o,p,n){m.endValue=parseFloat(p);m.units=n})}m.frameFunc=typeof m.frameFunc==="function"?m.frameFunc:d;if(m.startValue!==undefined){m.startValue=parseFloat(m.startValue)}else{if(m.css!==undefined&&i(this.element,m.css)){m.startValue=parseFloat(i(this.element,m.css))}else{m.startValue=0}}if(typeof m.easingFunc!=="function"){if(typeof m.easing==="string"&&typeof a[m.easing.toLowerCase()]==="function"){m.easingFunc=a[m.easing.toLowerCase()]}else{m.easingFunc=a.linear}}}function e(n){var m;for(m in n.animations){if(n.animations.hasOwnProperty(m)){try{l.call(this,n.animations[m])}catch(o){throw new Error(o.message+" in animation "+m)}}}}function b(m){g.call(this,m);h.call(this,m);if(typeof m.animations!=="object"){j.call(this,m)}e.call(this,m)}Animator=function(m){this.element=m};Animator.prototype.timeout=null;Animator.prototype.animate=function(m){b.call(this,m);k.call(this,m)};Animator.prototype.cancel=function(){if(this.timeout!==null){clearTimeout(this.timeout)}};Animator.registerEasingFunction=Animator.prototype.registerEasingFunction=function(m,n){if(typeof m==="string"&&typeof n==="function"){a[m.toLowerCase()]=n}}}());
